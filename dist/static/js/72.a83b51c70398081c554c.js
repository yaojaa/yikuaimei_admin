webpackJsonp([72],{KEdi:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o={data:function(){return{d:"",textarea:"",from_goods_list:[],to_goods_list:[],last_code:"",current_goods:{num:1,goods_name:"",goods_ico:""},current_goods_need_num:"xxx"}},beforeRouteUpdate:function(t,s,e){},created:function(){console.log("created")},watch:{textarea:function(t,s){var e=this;if(console.log("watch"),this.last_code&&""!==t&&t!==this.last_code)return console.log("当前商品进入代发货区"),this.toSendArea(),this.last_code="",void setTimeout(function(){e.textarea=""},1e3);var o=t.replace("\n","");o.length?(this.getCurrentGoodsInfo(o),setTimeout(function(){e.textarea=""},1e3)):console.log("长度0"),console.log("this.last_code:",this.last_code)}},computed:{},mounted:function(){this.getData(this.$route.params)},methods:{checkScanGoods:function(t){var s=this;return this.from_goods_list.forEach(function(e,o){if(console.log("each",e.sku_code,t.sku_info.sku),e.sku_code==t.sku_info.sku_code)return s.current_goods_need_num=e.goods_num,!0}),!0},toSendArea:function(){this.to_goods_list.push(this.current_goods),this.current_goods={num:0,goods_name:"",goods_ico:""}},getCurrentGoodsInfo:function(t){var s=this;this.$axios({method:"get",url:"https:\\image.countinsight.com/goods.json"}).then(function(e){if(200==e.status){var o=e.data[t]||!1;o&&(s.checkScanGoods(o)?(t==s.last_code&&(s.current_goods.num=++s.current_goods.num),s.last_code=t.trim(),s.current_goods.goods_name=o.good_name,s.current_goods.goods_ico=o.good_ico,console.log(s.current_goods)):s.$alert("这是一段内容","商品不存在",{confirmButtonText:"确定"}))}else s.$message({message:e.data.msg,type:"warning"})}).catch(function(t){console.log(t)})},numhandleChange:function(t){console.log(t)},getData:function(t){var s=this;this.$axios({method:"get",url:"/api/admin/order/confirmDis",params:t}).then(function(t){0==t.data.code?(s.d=t.data.data,s.from_goods_list=t.data.data.goods_list):s.$message({message:t.data.msg,type:"warning"})}).catch(function(t){console.log(t)})}}},a={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"page"},[e("div",{staticClass:"page-header"},[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",[t._v("订单管理")]),t._v(" "),e("el-breadcrumb-item",[t._v("订单管理")]),t._v(" "),e("el-breadcrumb-item",{attrs:{to:{path:t.$route.path}}},[t._v(t._s(t.$route.meta.title))])],1)],1),t._v(" "),e("div",{staticClass:"page-content"},[e("div",{staticClass:"panel"},[t._m(0),t._v(" "),e("div",{staticClass:"panel-body"},[e("div",{staticClass:"info_p"},[t._v("\n                        收件人："+t._s(t.d.order_user_name)),e("br"),t._v("\n                        收货地址："+t._s(t.d.order_user_address)),e("br"),t._v("\n                        备注："+t._s(t.d.order_remark)),e("br")])])]),t._v(" "),e("div",{staticClass:"panel"},[e("el-row",{attrs:{gutter:8}},[e("el-col",{attrs:{span:5}},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("待发货")])]),t._v(" "),t._l(t.from_goods_list,function(s){return e("div",{key:s.id,staticClass:"text clearfix flex_box"},[e("div",{staticClass:"img"},[e("img",{attrs:{src:"http://192.168.2.178:8888/%E5%8E%9F%E5%9E%8B/%E5%B9%B3%E5%8F%B0%E5%8E%9F%E5%9E%8B-html/images/%E5%B9%B3%E5%8F%B0%E5%95%86%E5%93%81/u999.png",width:"50",height:"50"}})]),t._v(" "),e("div",{staticClass:"con"},[e("p",[t._v(t._s(s.goods_name))]),t._v(" "),e("p",[t._v(t._s(s.sku_type))]),t._v(" "),e("p",[t._v(t._s(s.goods_num))])])])})],2)],1),t._v(" "),e("el-col",{attrs:{span:13}},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("操作区")])]),t._v(" "),e("el-card",{attrs:{shadow:"always"}},[e("el-input",{attrs:{type:"input",rows:2,placeholder:"请扫描商品"},model:{value:t.textarea,callback:function(s){t.textarea="string"==typeof s?s.trim():s},expression:"textarea"}})],1),t._v(" "),e("br"),e("br"),t._v(" "),e("el-card",{attrs:{shadow:"always"}},[e("h1",{staticStyle:{color:"red"}},[t._v("\n\t\t\t\t  \t该商品共"+t._s(t.current_goods_need_num)+"件，您还差"+t._s(t.current_goods_need_num-t.current_goods.num)+"件没扫\n\t\t\t\t  ")])]),t._v(" "),t.current_goods.goods_name?e("el-card",{attrs:{shadow:"always"}},[e("div",{staticClass:"flex_box"},[e("div",{staticClass:"img"},[e("img",{attrs:{src:"https://file.iviewui.com/weapp/dist/e5da9fdc97a0b3fb16c115d379820583.jpg",width:"50",height:"50"}})]),t._v(" "),e("div",{staticClass:"goods_conent"},[e("p",[t._v(t._s(t.current_goods.goods_name))]),t._v(" "),e("p",[t._v(t._s(t.current_goods.sku_type))]),t._v(" "),e("el-input-number",{attrs:{min:1,label:"数量"},on:{change:t.numhandleChange},model:{value:t.current_goods.num,callback:function(s){t.$set(t.current_goods,"num",s)},expression:"current_goods.num"}}),t._v(" "),e("br"),t._v(" "),e("br"),t._v(" "),e("el-button",{attrs:{size:"large",type:"success"},on:{click:t.toSendArea}},[t._v("确定")])],1),t._v(" "),e("div",{staticClass:"num"},[t._v("\n                                            ✖️"+t._s(t.current_goods.num)+"\n                                        ")])])]):t._e()],1)],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("待确认发货")])]),t._v(" "),t._l(t.to_goods_list,function(s){return e("div",{key:s.id,staticClass:"text clearfix flex_box"},[e("div",{staticClass:"img"},[e("img",{attrs:{src:s.good_ico,width:"50",height:"50"}})]),t._v(" "),e("div",{staticClass:"con"},[e("p",[t._v(t._s(s.goods_name))]),t._v(" "),e("p",[t._v(t._s(s.sku_type))]),t._v(" "),e("p",[t._v(t._s(s.num))])])])}),t._v(" "),e("el-button",{attrs:{size:"large",type:"success"}},[t._v("打印快递单")])],2)],1)],1)],1)])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"panel-heading"},[s("h3",{staticClass:"panel-title"},[this._v("订单信息")])])}]};var n=e("VU/8")(o,a,!1,function(t){e("aQJ1")},"data-v-5b2786ad",null);s.default=n.exports},aQJ1:function(t,s){}});