webpackJsonp([4],{"0nYq":function(e,t){},"95gL":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("Dd8w"),a=o.n(r),n=o("NYxO"),i=o("UyYF"),s=o("tVcc"),l=o("M4fF"),c=o.n(l),u={name:"createGood-lable",props:["tagList"],data:function(){return{lable_show:!1,good_category_sons:{},tag_list:[]}},computed:a()({},Object(n.c)("createdGoode",["lableList","formInfo"]),{defaultActive:function(){var e=this.lableList[0]||{};return e?e.tag_group_sons?e.tag_group_sons[0].tag_group_name:e.tag_group_name:""}}),watch:{tagList:{handler:function(e,t){this.tag_list=c.a.cloneDeep(e)},deep:!0},lableList:function(e){this.initSons()}},methods:{$_addLable:function(){this.lable_show=!1,this.$emit("addLable",this.tag_list)},addLable:function(e,t){var o=this,r={tag_id:t,tag_name:e};this.isDisable(t)||this.$axios.get("/api/admin/select/getFriendTagList?tag_id="+t).then(function(e){var t=e.data.data||[];t.push(r),o.tag_list=c.a.unionBy(o.tag_list,t,"tag_id")})},isDisable:function(e){return!!this.tag_list.filter(function(t){return t.tag_id==e}).length},$_deleteTag:function(e){this.tag_list.splice(e,1)},computedSons:function(e,t){var o=this.lableList.filter(function(e){return e.tag_group_name==t[0]});2===t.length&&o.length&&(o=o[0].tag_group_sons.filter(function(e){return e.tag_group_name==t[1]})),this.good_category_sons=o.length?o[0].tag_list:""},initSons:function(){var e=this.lableList[0]||{};this.good_category_sons=e.tag_group_sons?e.tag_group_sons[0].tag_list:e.tag_list}}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:"标签",visible:e.lable_show,size:"large"},on:{"update:visible":function(t){e.lable_show=t}}},[o("div",[e._v("\n      已选：\n      "),e._l(e.tag_list,function(t,r){return o("el-tag",{key:t.tag_id,attrs:{closable:"",type:"gray"},on:{close:function(t){e.$_deleteTag(r)}}},[e._v("\n          "+e._s(t.tag_name)+"\n      ")])})],2),e._v(" "),o("el-row",[o("el-col",{attrs:{span:8}},e._l(e.lableList,function(t){return o("el-menu",{key:t.tag_group_name,staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.defaultActive},on:{select:e.computedSons}},[t.tag_group_sons?o("el-submenu",{attrs:{index:t.tag_group_name}},[o("template",{slot:"title"},[o("span",[e._v(e._s(t.tag_group_name))])]),e._v(" "),e._l(t.tag_group_sons,function(t){return o("el-menu-item",{key:t.tag_group_name,attrs:{index:t.tag_group_name}},[e._v("\n              "+e._s(t.tag_group_name)+"\n            ")])})],2):o("el-menu-item",{attrs:{index:t.tag_group_name}},[o("span",{attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(t.tag_group_name)+" ")])])],1)})),e._v(" "),o("el-col",{attrs:{span:16}},[o("div",{staticClass:"grid-content bg-purple-light"},[o("ul",{staticClass:"lableList"},e._l(e.good_category_sons,function(t){return o("li",{key:t.tag_group_name||t.tag_name,class:{li__disable:e.isDisable(t.tag_group_id||t.tag_id)},on:{click:function(o){e.addLable(t.tag_group_name||t.tag_name,t.tag_group_id||t.tag_id)}}},[e._v("\n              "+e._s(t.tag_group_name||t.tag_name)+"\n            ")])}))])])],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.lable_show=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.$_addLable}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var g=o("VU/8")(u,d,!1,function(e){o("tXAg")},null,null).exports,m={props:{goodSkuinfo:{type:Array,default:function(){return[{name:"",list:[],inputValue:""},{name:"",list:[],inputValue:""}]}}},data:function(){return{format_show:!1,inputVisible0:!1,inputVisible1:!1,goodSkuInfo:[{name:"",list:[],inputValue:""},{name:"",list:[],inputValue:""}]}},watch:{goodSkuinfo:{handler:function(e,t){this.goodSkuInfo=c.a.cloneDeep(e)},deep:!0}},methods:{$_addFormat:function(){console.log(this.goodSkuInfo);for(var e=this.goodSkuInfo,t=!0,o=0;o<e.length;o++){if(!e[o].list.length){t=!1;break}t=!0}t?(this.format_show=!1,this.$emit("addFormat",this.goodSkuInfo)):this.$message({message:"请填写规格",type:"warning"})},$_createFormat:function(e){var t=this;this["inputVisible"+e]=!0,this.$nextTick(function(o){t.$refs["saveTagInput"+e][0].$refs.input.focus()})},handleInputConfirm:function(e,t){var o="inputVisible"+e,r=this.goodSkuInfo[e].inputValue;r&&t.push(r),this.goodSkuInfo[e].inputValue="",this[o]=!1},$_deletedTag:function(e,t){e.splice(e.indexOf(t),1)}},created:function(){}},p={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:"添加规格",visible:e.format_show,size:"large",id:"format_show"},on:{"update:visible":function(t){e.format_show=t}}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:4}},[e._v(" ")]),e._v(" "),o("el-col",{attrs:{span:4}},[e._v("名称")]),e._v(" "),o("el-col",{attrs:{span:12}},[e._v("选项")])],1),e._v(" "),e._l(e.goodSkuInfo,function(t,r){return o("div",{key:""+t.name+r},[o("el-row",{attrs:{gutter:20}},0===r?[o("el-col",{attrs:{span:4}},[e._v("一组")]),e._v(" "),o("el-col",{attrs:{span:4}},[o("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.name,callback:function(o){e.$set(t,"name",o)},expression:"item.name"}})],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-input",{attrs:{placeholder:"请输入选项",disabled:t.list&&t.list.length>1},model:{value:t.list[0],callback:function(o){e.$set(t.list,0,o)},expression:"item.list[0]"}}),e._v(" "),e._l(t.list,function(r,a){return 0!==a?o("el-tag",{key:a,attrs:{"disable-transitions":!1,closable:!0},on:{close:function(o){e.$_deletedTag(t.list,r)}}},[e._v("\n                  "+e._s(r)+"\n                ")]):e._e()}),e._v(" "),e.inputVisible0?o("el-input",{ref:"saveTagInput0",refInFor:!0,staticClass:"input-new-tag",style:{width:"100px"},attrs:{size:"small",placeholder:"请输入选项"},on:{blur:function(o){e.handleInputConfirm(r,t.list)}},nativeOn:{keyup:function(o){if(!("button"in o)&&e._k(o.keyCode,"enter",13,o.key,"Enter"))return null;e.handleInputConfirm(r,t.list)}},model:{value:t.inputValue,callback:function(o){e.$set(t,"inputValue",o)},expression:"item.inputValue"}}):o("i",{staticClass:"el-icon-plus",on:{click:function(t){e.$_createFormat(r)}}})],2)]:[o("el-col",{attrs:{span:4}},[e._v("二组")]),e._v(" "),o("el-col",{attrs:{span:4}},[o("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.name,callback:function(o){e.$set(t,"name",o)},expression:"item.name"}})],1),e._v(" "),o("el-col",{attrs:{span:12}},[o("el-input",{attrs:{placeholder:"请输入选项",disabled:t.list&&t.list.length>1},model:{value:t.list[0],callback:function(o){e.$set(t.list,0,o)},expression:"item.list[0]"}}),e._v(" "),e._l(t.list,function(r,a){return 0!==a?o("el-tag",{key:r,attrs:{"disable-transitions":!1,closable:!0},on:{close:function(o){e.$_deletedTag(t.list,r)}}},[e._v("\n                  "+e._s(r)+"\n                ")]):e._e()}),e._v(" "),e.inputVisible1?o("el-input",{ref:"saveTagInput1",refInFor:!0,staticClass:"input-new-tag",style:{width:"100px"},attrs:{size:"small",placeholder:"请输入选项"},on:{blur:function(o){e.handleInputConfirm(r,t.list)}},nativeOn:{keyup:function(o){if(!("button"in o)&&e._k(o.keyCode,"enter",13,o.key,"Enter"))return null;e.handleInputConfirm(r,t.list)}},model:{value:t.inputValue,callback:function(o){e.$set(t,"inputValue",o)},expression:"item.inputValue"}}):o("i",{staticClass:"el-icon-plus",on:{click:function(t){e.$_createFormat(r)}}})],2)],1)],1)}),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.format_show=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.$_addFormat}},[e._v("确 定")])],1)],2)},staticRenderFns:[]};var f={name:"createGood-formlist",components:{Formate:o("VU/8")(m,p,!1,function(e){o("0nYq")},null,null).exports,Lable:g},data:function(){return{good_ico__Key:String(new Date+1),good_video_pic__Key:String(new Date+2),good_video__Key:String(new Date+3),tagList__key:String(new Date+4),CATEGORYOPTIONS:i.a,canAdd__goodImg:!1,canAdd__goodImg2:!1,dialogImageUrl:"",dialogVisible:!1,limitNumber:6,limitNumber2:6,currentFormInfo:{},goodSkuStatus:!1,rules:{good_name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:2,max:30,message:"长度在2-30个字符",trigger:"blur"}],good_explain:[{required:!0,message:"在商品详情页标题下面展示卖点信息，建议50字以内",trigger:"blur"},{min:2,max:50,message:"在商品详情页标题下面展示卖点信息，建议50字以内",trigger:"blur"}],category_id:[{required:!0,message:"请选择所属行业分类",trigger:"blur"}],tag_list:[{required:!0,message:"请添加标签",trigger:"blur"}],format:[{required:!0,message:"请选择规格",trigger:"change"}],productCode:[{required:!0,message:"请填写商品编码",trigger:"blur"}],sellPrice:[{required:!0,message:"请填写售价",trigger:"blur"}],price:[{required:!0,message:"请填写原价",trigger:"blur"}]}}},computed:a()({},Object(n.c)("createdGoode",["formInfo"]),{isGoodFriend:function(){return"1"===this.$route.query.good_type}}),watch:{formInfo:{handler:function(e,t){this.currentFormInfo=c.a.cloneDeep(e),e.goodSkuInfo&&e.goodSkuInfo.length&&(this.goodSkuStatus=!0,this.currentFormInfo.singleButton="添加规格")},deep:!0}},methods:{$_showLable:function(){var e=this;this.currentFormInfo.category_id?this.$store.dispatch("createdGoode/fetchLableList",{tag_group_type:this.formInfo.good_type,category_id:this.currentFormInfo.category_id||1,get_tag_list:1}).then(function(){e.$refs.lable.initSons(),e.$refs.lable.lable_show=!0}):alert("请先选择行业id")},$_addLable:function(e){this.currentFormInfo.tag_list=e,this.currentFormInfo.tag_id_arr=e.map(function(e){return e.tag_id}),this.tagList__key=String(new Date+14)},$_exceed:function(e,t){this.$message.warning("当前限制选择6个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},$_beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,o=e.size/1024/1024<5;return t||this.$message.error("上传头像图片只能是 JPG 或 PNG 格式!"),o||this.$message.error("上传头像图片大小不能超过 5MB!"),t&&o},$_beforeUpload_uploadArray_content:function(e){var t="video/mp4"===e.type,o=e.size/1024/1024<20;return t||this.$message.error("上传视频只能是 mp4 格式!"),o||this.$message.error("上传视频大小不能超过 20MB!"),t&&o},$_success:function(e,t,o){o.length>=6&&(this.canAdd__goodImg=!0),this.limitNumber=6-+o.length,this.currentFormInfo.good_img_arr=o},$_success2:function(e,t,o){o.length>=6&&(this.canAdd__goodImg2=!0),this.limitNumber2=6-+o.length,this.currentFormInfo.explain_img_arr=o},$_success_uploadArray_content:function(e,t){this.currentFormInfo.good_video__url=t.response.data.url,this.currentFormInfo.good_video=t.response.data.file_name,this.good_video__Key=String(new Date+11)},$_success__good_video_pic:function(e,t){this.currentFormInfo.good_video_pic__url=URL.createObjectURL(t.raw),this.currentFormInfo.good_video_pic=t.response.data.file_name,this.good_video_pic__Key=String(new Date+12)},$_success__table_ico_small:function(e,t,o){o.iconStatus=!0,o.ico_small=t.response.data.file_name,o.ico_small__url=t.url},$_success__good_ico:function(e,t){this.currentFormInfo.good_ico__url=URL.createObjectURL(t.raw),this.currentFormInfo.good_ico=t.response.data.file_name,this.good_ico__Key=String(new Date+13)},$_error:function(e,t,o){this.$message.error("图片上传失败")},$_onPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},$_remove:function(e,t){this.limitNumber=6-+t.length,this.canAdd__goodImg=!1,this.currentFormInfo.good_img_arr=t},$_remove2:function(e,t){this.limitNumber2=6-+t.length,this.canAdd__goodImg2=!1,this.currentFormInfo.explain_img_arr=t},$_showFormat:function(){"添加规格"===this.currentFormInfo.singleButton?this.showFormat():(this.currentFormInfo.goodSkuInfo=[{name:"",list:[],inputValue:""},{name:"",list:[],inputValue:""}],this.currentFormInfo.sku_type_arr=[],this.currentFormInfo.good_sku=[],this.goodSkuStatus=!1)},showFormat:function(){this.$refs.formate.format_show=!0},$_SpanMethod:function(e){e.row,e.column;var t=e.rowIndex,o=e.columnIndex;this.currentFormInfo.sku_type_arr.length;if(0===o||6===o)return t%(this.currentFormInfo.good_sku.length/this.currentFormInfo.sku_type_arr.length)==0?{rowspan:this.currentFormInfo.good_sku.length/this.currentFormInfo.sku_type_arr.length,colspan:1}:{rowspan:0,colspan:0}},$_addFormat:function(e){this.currentFormInfo.goodSkuInfo=e;for(var t=e[0].list,o=e[1].list,r=[],a=0;a<t.length;a++)for(var n=0;n<o.length;n++)r.push({sku_type_arr:[t[a],o[n]],sku_code:"",price_cost:"",price:"",price_sale:"",price_plate:"",ico_small:"",ico_small__url:""});this.currentFormInfo.sku_type_arr=e.map(function(e){return e.name}),this.currentFormInfo.good_sku=r,this.currentFormInfo.goodSkuInfo&&this.currentFormInfo.goodSkuInfo.length&&(this.goodSkuStatus=!0)},$_changeTabNext:function(){var e=this;this.$refs.currentFormInfo.validate(function(t){t&&(e.$store.commit("createdGoode/setFormInfo",e.currentFormInfo),e.$emit("changeTabNext"))})}}},h={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"currentFormInfo",attrs:{model:e.currentFormInfo,rules:e.rules,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"名称：",prop:"good_name"}},[o("el-input",{attrs:{placeholder:"名称为2-30个字"},model:{value:e.currentFormInfo.good_name,callback:function(t){e.$set(e.currentFormInfo,"good_name",t)},expression:"currentFormInfo.good_name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"商品卖点：",prop:"good_explain"}},[o("el-input",{attrs:{type:"textarea",placeholder:"长度为2-50个字","suffix-icon":"el-icon-arrow-right"},model:{value:e.currentFormInfo.good_explain,callback:function(t){e.$set(e.currentFormInfo,"good_explain",t)},expression:"currentFormInfo.good_explain"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"行业分类：",prop:"category_id"}},[o("el-select",{attrs:{placeholder:"请选择所属行业分类"},model:{value:e.currentFormInfo.category_id,callback:function(t){e.$set(e.currentFormInfo,"category_id",t)},expression:"currentFormInfo.category_id"}},e._l(e.CATEGORYOPTIONS,function(e){return o("el-option",{key:e.category_id+"category_id",attrs:{label:e.category_name,value:e.category_id}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"标签：",prop:"tag_list"}},[o("div",{key:e.tagList__key,staticClass:"el-input el-input--small el-input--suffix div__input",on:{click:e.$_showLable}},[e._l(e.currentFormInfo.tag_list,function(t){return o("el-tag",{key:""+t.tag_name},[e._v("\n                    "+e._s(t.tag_name))])}),e._v(" "),o("span",{staticClass:"el-input__suffix"},[o("span",{staticClass:"el-input__suffix-inner"},[o("i",{staticClass:"el-input__icon el-icon-arrow-right"})])])],2),e._v(" "),o("p",{staticClass:"input__tabs"},[e._v("可设置多个标签")])]),e._v(" "),e.isGoodFriend?e._e():o("el-form-item",{attrs:{label:"规格",props:"format"}},[o("el-radio-group",{on:{change:this.$_showFormat},model:{value:e.currentFormInfo.singleButton,callback:function(t){e.$set(e.currentFormInfo,"singleButton",t)},expression:"currentFormInfo.singleButton"}},[o("el-radio-button",{attrs:{label:"无规格"}}),e._v(" "),o("el-radio-button",{attrs:{label:"添加规格"}})],1)],1),e._v(" "),e.goodSkuStatus?o("el-form-item",[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:4}},[e._v("名称:")]),e._v(" "),o("el-col",{attrs:{span:12}},[e._v("选项: ")])],1),e._v(" "),e._l(e.currentFormInfo.goodSkuInfo,function(t,r){return o("el-row",{key:""+t.name+r,staticClass:"goodSkuInfo_row",attrs:{gutter:20}},[o("el-col",{attrs:{span:4}},[o("el-button",{attrs:{plain:""}},[e._v(e._s(t.name))])],1),e._v(" "),o("el-col",{attrs:{span:12}},e._l(t.list,function(t){return o("el-button",{key:t+"tag",attrs:{plain:""}},[e._v(e._s(t))])})),e._v(" "),o("el-col",{attrs:{span:2}},[r===e.currentFormInfo.goodSkuInfo.length-1?o("el-button",{attrs:{click:"$_edit"},on:{click:function(t){e.showFormat()}}},[e._v("编辑")]):e._e()],1)],1)}),e._v(" "),o("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.currentFormInfo.good_sku,border:"","span-method":e.$_SpanMethod}},[o("el-table-column",{attrs:{label:e.currentFormInfo.sku_type_arr[0],prop:"sku_type_arr[0]"}}),e._v(" "),e.currentFormInfo.sku_type_arr[1]?o("el-table-column",{attrs:{label:e.currentFormInfo.sku_type_arr[1],prop:"sku_type_arr[1]"}}):e._e(),e._v(" "),o("el-table-column",{attrs:{label:"售价"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"10000"},model:{value:t.row.price_sale,callback:function(o){e.$set(t.row,"price_sale",o)},expression:"scope.row.price_sale"}}),e._v(" "),o("span",{staticClass:"outText1"},[e._v("元")])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"原价"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"10000"},model:{value:t.row.price,callback:function(o){e.$set(t.row,"price",o)},expression:"scope.row.price"}}),o("span",{staticClass:"outText1"},[e._v(" 元")])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"成本"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"10000"},model:{value:t.row.price_cost,callback:function(o){e.$set(t.row,"price_cost",o)},expression:"scope.row.price_cost"}}),e._v(" "),o("span",{staticClass:"outText1"},[e._v("元")])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{attrs:{placeholder:"10000"},model:{value:t.row.sku_code,callback:function(o){e.$set(t.row,"sku_code",o)},expression:"scope.row.sku_code"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"图片",prop:"ico_small"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-upload",{staticClass:"table_upload",class:{table_upload__disabled:t.row.iconStatus},attrs:{"show-file-list":!1,action:"/api/admin/fileupload/image","on-error":e.$_error,"on-preview":e.$_onPreview,"before-upload":e.$_beforeUpload,"on-success":function(o,r){return e.$_success__table_ico_small(o,r,t.row)}}},[t.row.ico_small?o("img",{staticClass:"avatar",attrs:{src:t.row.ico_small__url}}):o("span",{staticClass:"table_icon_text"},[o("i",{staticClass:"el-icon-plus"}),e._v("添加商品图片")])])]}}])})],1)],2):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"商品编码：",prop:"productCode"}},[o("el-input",{attrs:{placeholder:"支持14以内的数字+英文组合"},model:{value:e.currentFormInfo.productCode,callback:function(t){e.$set(e.currentFormInfo,"productCode",t)},expression:"currentFormInfo.productCode"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"售价：",prop:"sellPrice"}},[o("el-input",{attrs:{placeholder:"请输入套餐在婚博会标价"},model:{value:e.currentFormInfo.sellPrice,callback:function(t){e.$set(e.currentFormInfo,"sellPrice",t)},expression:"currentFormInfo.sellPrice"}}),e._v(" "),o("span",{staticClass:"outText"},[e._v("元")])],1),e._v(" "),o("el-form-item",{attrs:{label:"原价：",prop:"price"}},[o("el-input",{attrs:{placeholder:"¥5000"},model:{value:e.currentFormInfo.price,callback:function(t){e.$set(e.currentFormInfo,"price",t)},expression:"currentFormInfo.price"}}),e._v(" "),o("span",{staticClass:"outText"},[e._v("元")])],1),e._v(" "),o("el-form-item",{attrs:{label:"商品图片：",prop:"good_img_arr"}},[o("div",{staticClass:"upload-title"},[e._v("\n            您可以上传3-6张图片及1个视频作为商品展示图，"),o("br"),e._v("\n            展示在商品页顶部的图片，支持上传1-6张图片，你可以拖拽图片调整图片的现实顺序，图片宽高比为1242*1242，支持JPG、PNG等大部分格式图片，单张图片大小不超过5M \n            ")]),e._v(" "),o("el-upload",{class:{canAdd__goodImg:e.canAdd__goodImg},attrs:{action:"/api/admin/fileupload/image","list-type":"picture-card","on-preview":e.$_onPreview,"on-success":e.$_success,"on-error":e.$_error,"on-remove":e.$_remove,"on-exceed":e.$_exceed,"before-upload":e.$_beforeUpload,"file-list":e.currentFormInfo.good_img_arr,limit:6,multiple:!0}},[o("i",{staticClass:"el-icon-plus upload-placeholder"},[o("p",[e._v("添加图片")]),o("span",[e._v("还可以添加"+e._s(e.limitNumber)+"张")])]),e._v(" "),o("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"商品卖点图：",prop:"explain_img_arr"}},[o("el-upload",{class:{canAdd__goodImg:e.canAdd__goodImg2},attrs:{action:"/api/admin/fileupload/image","list-type":"picture-card","on-preview":e.$_onPreview,"on-success":e.$_success2,"on-error":e.$_error,"on-remove":e.$_remove2,"on-exceed":e.$_exceed,"before-upload":e.$_beforeUpload,"file-list":e.currentFormInfo.explain_img_arr,limit:6,multiple:!0}},[o("i",{staticClass:"el-icon-plus upload-placeholder"},[o("p",[e._v("添加图片")]),o("span",[e._v("还可以添加"+e._s(e.limitNumber2)+"张")])]),e._v(" "),o("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"uploadArray"}},[o("div",{staticClass:"upload-title"},[e._v("\n            展示在商品页顶部的视频，"),o("a",[e._v("最多可上传 1 个视频")]),e._v("，\n            支持MP4视频格式，"),o("a",[e._v("视频大小不能超过20M")])]),e._v(" "),o("div",{staticClass:"uploadArray_content"},[o("el-upload",{key:e.good_video__Key,staticClass:"avatar-uploader",attrs:{action:"/api/admin/fileupload/image","show-file-list":!1,"on-success":e.$_success_uploadArray_content,"on-error":e.$_error,"before-upload":e.$_beforeUpload_uploadArray_content}},[e.currentFormInfo.good_video__url?o("video",{staticClass:"avatar",attrs:{src:e.currentFormInfo.good_video__url,controls:"controls"}},[e._v("您的浏览器不支持视频播放")]):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"},[o("p",[e._v("添加视频")])])]),e._v(" "),o("el-upload",{key:e.good_video_pic__Key,staticClass:"avatar-uploader",attrs:{action:"/api/admin/fileupload/image","show-file-list":!1,"on-success":e.$_success__good_video_pic,"on-error":e.$_error,"before-upload":e.$_beforeUpload}},[e.currentFormInfo.good_video_pic__url?o("img",{staticClass:"avatar",attrs:{src:e.currentFormInfo.good_video_pic__url}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon upload-placeholder"},[o("p",[e._v("添加视频首图")])])])],1)]),e._v(" "),o("el-form-item",{attrs:{label:"商品展示图：",prop:"good_ico"}},[o("div",{staticClass:"upload-title"},[o("p",[e._v("展示在商品页顶部的图片，支持上传 1 张图片，你可以拖拽图片调整图片的现实顺序，图片宽高比为400*400，支持JPG、PNG等大部分格式图片，单张图片大小不超过2M")])]),e._v(" "),o("el-upload",{key:e.good_ico__Key,staticClass:"avatar-uploader",attrs:{action:"/api/admin/fileupload/image","show-file-list":!1,"on-success":e.$_success__good_ico,"on-error":e.$_error,"before-upload":e.$_beforeUpload}},[e.currentFormInfo.good_ico__url?o("img",{staticClass:"avatar",attrs:{src:e.currentFormInfo.good_ico__url}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon upload-placeholder"},[o("p",[e._v("添加图片")]),o("span",[e._v("只能上传一张")])])])],1),e._v(" "),o("el-form-item",[o("el-button",{on:{click:e.$_changeTabNext}},[e._v("下一步")])],1)],1),e._v(" "),o("Lable",{ref:"lable",attrs:{tagList:e.currentFormInfo.tag_list},on:{addLable:e.$_addLable}}),e._v(" "),o("Formate",{ref:"formate",attrs:{goodSkuinfo:e.currentFormInfo.goodSkuInfo},on:{addFormat:e.$_addFormat}})],1)},staticRenderFns:[]};var v=o("VU/8")(f,h,!1,function(e){o("kpHl")},null,null).exports,b={name:"createGood-formlist",data:function(){return{canAdd__goodImg:!1,dialogImageUrl:"",dialogVisible:!1,limitNumber:6,currentFormInfo:{show_img_arr:[],good_notes:""},rules:{show_img_arr:[{required:!0,message:"请选择商品展示图",trigger:"change"}],good_notes:[{required:!0,message:"请填写购买须知",trigger:"blur"}]}}},computed:a()({},Object(n.c)("createdGoode",["formInfo"])),watch:{formInfo:{handler:function(e,t){this.currentFormInfo=_.cloneDeep(e)},deep:!0}},methods:{$_createProduct:function(){var e=this;this.$store.commit("createdGoode/setFormInfo",this.currentFormInfo);var t=this.$route.query,o=t.good_id,r=t.good_type,a=this.formInfo;this.$refs.currentFormInfo.validate(function(t){if(t)if("0"===o){var n=_.cloneDeep(a);n.good_img_arr=n.good_img_arr.map(function(e){return e.response.data.file_name}),n.explain_img_arr=n.explain_img_arr.map(function(e){return e.response.data.file_name}),n.show_img_arr=n.show_img_arr.map(function(e){return e.response.data.file_name}),n.price=100*+n.price,n.sellPrice=100*+n.sellPrice,n.good_sku=n.good_sku.map(function(e){return e.price_cost=100*+e.price_cost,e.price=100*+e.price,e.price_sale=100*+e.price_sale,e}),e.$store.dispatch("createdGoode/fetchFormInfoCreate",n).then(function(t){0===t.code?(e.$message.success(t.msg),e.$_goOut(r)):e.$message.error(t.msg)})}else{var i=_.cloneDeep(a);i.good_img_arr=i.good_img_arr.map(function(e){return e.url}),i.show_img_arr=i.show_img_arr.map(function(e){return e.url}),i.explain_img_arr=i.explain_img_arr.map(function(e){return e.url}),i.sellPrice=100*i.sellPrice,i.price=100*i.price,i.good_sku=i.good_sku.map(function(e){return e.price_cost=100*+e.price_cost,e.price=100*+e.price,e.price_sale=100*+e.price_sale,e}),e.$store.dispatch("createdGoode/fetchFormInfoModify",i).then(function(t){0===t.code?(e.$message.success(t.msg),e.$_goOut(r)):e.$message.error(t.msg)})}})},$_goOut:function(e){switch(e){case"1":this.$router.push("/serviceList");break;case"2":this.$router.push("/goodList");break;case"3":this.$router.push("/purchaseList");break;case"4":this.$router.push("/fictitiousList")}},$_changeTabPre:function(){this.$emit("changeTabPre")},$_exceed:function(e,t){this.$message.warning("当前限制选择 6 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},$_beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,o=e.size/1024/1024<5;return t||this.$message.error("上传头像图片只能是 JPG 或 PNG格式!"),o||this.$message.error("上传头像图片大小不能超过 5MB!"),t&&o},$_success:function(e,t,o){o.length>=6&&(this.canAdd__goodImg=!0),this.limitNumber=6-+o.length,this.currentFormInfo.show_img_arr=o},$_error:function(e,t,o){this.$message.error("图片上传失败")},$_onPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},$_remove:function(e,t){this.limitNumber=6-+t.length,this.canAdd__goodImg=!1,this.currentFormInfo.show_img_arr=t}}},$={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"currentFormInfo",attrs:{model:e.currentFormInfo,rules:e.rules,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"商品展示图：",prop:"show_img_arr"}},[o("div",{staticClass:"upload-title"},[e._v("\n        展示在商品的图片详情中的图片，至少上传1张，拖拽图片调整图片顺序，双击可预览大图，图片1242*1242px，单张图片不要超过5M，支持JPG、PNG等常见图片格式。\n      ")]),e._v(" "),o("el-upload",{class:{canAdd__goodImg:e.canAdd__goodImg},attrs:{action:"/api/admin/fileupload/image","list-type":"picture-card","on-preview":e.$_onPreview,"on-success":e.$_success,"on-error":e.$_error,"on-remove":e.$_remove,"on-exceed":e.$_exceed,"before-upload":e.$_beforeUpload,"file-list":e.currentFormInfo.show_img_arr,limit:6,multiple:!0}},[o("i",{staticClass:"el-icon-plus upload-placeholder"},[o("p",[e._v("添加图片")]),o("span",[e._v("还可以添加"+e._s(e.limitNumber)+"张")])]),e._v(" "),o("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"补充说明：",prop:"good_notes"}},[o("el-input",{attrs:{type:"textarea",placeholder:"请填写购买须知","suffix-icon":"el-icon-arrow-right"},model:{value:e.currentFormInfo.good_notes,callback:function(t){e.$set(e.currentFormInfo,"good_notes",t)},expression:"currentFormInfo.good_notes"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.$_changeTabPre}},[e._v("上一步")]),e._v(" "),o("el-button",{on:{click:e.$_createProduct}},[e._v("上架")])],1)],1)},staticRenderFns:[]};var I=o("VU/8")(b,$,!1,function(e){o("sBwj")},null,null).exports,F={name:"product__card",data:function(){return{currentDate:new Date}},props:{goodName:{type:String,default:""},price:{type:Number,default:0},closeble:{type:Boolean,default:!1}},methods:{$_deleteTag:function(){this.$emit("deleteTag")},$_click:function(){this.$emit("click")}}},y={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"product_card"},on:{click:e.$_click}},[r("div",{staticClass:"el-card__body"},[r("img",{staticClass:"image",attrs:{src:o("chPc")}}),e._v(" "),r("div",{staticClass:"right"},[r("p",{staticClass:"right_title"},[e._v(e._s(e.goodName))]),e._v(" "),r("span",[e._v("¥"+e._s(e.price))])]),e._v(" "),e.closeble?r("i",{staticClass:"el-icon-error product_card_icon",on:{click:e.$_deleteTag}}):e._e()])])},staticRenderFns:[]};var k={name:"createGood-goodFriend",components:{productCard:o("VU/8")(F,y,!1,function(e){o("jjd0")},null,null).exports},data:function(){return{currentDate:new Date,goodFriend_show:!1,goodFriendsList:[],CATEGORYOPTIONS:i.a,defaultActive:"美容",group_sku_id:[],good_friends:[],good_friendsDialog:[]}},computed:a()({},Object(n.c)("createdGoode",["formInfo","goodFriends"])),watch:{formInfo:{handler:function(e,t){this.good_friends=_.cloneDeep(e.good_friends)},deep:!0}},methods:{$_showgoodFriend:function(){this.computedRightData(1,this.defaultActive),this.good_friendsDialog=_.cloneDeep(this.good_friends),this.goodFriend_show=!0},isDisable:function(e){return this.good_friendsDialog.filter(function(t){return t.good_id===e}).length>0},$_addGoodFriend:function(e){if(!this.isDisable(e.good_id)){var t={good_id:e.good_id,sku_id:e.sku_list,good_name:e.good_name,good_ico:e.good_ico,price_low:e.price_low,price_high:e.price_high,group_sku_id:[]};this.good_friendsDialog.push(t)}},$_confirmAdd:function(){this.good_friends=_.cloneDeep(this.good_friendsDialog),this.goodFriend_show=!1},$_deleteTag:function(e){this.good_friendsDialog.splice(e,1)},$_changeTabNext:function(){good_friends.length||this.$emit("changeTabNext"),this.$store.commit("createdGoode/setFormInfo",{good_friends:this.good_friends})},$_changeTabPre:function(){this.$emit("changeTabPre")},computedRightData:function(e,t){var o=this;this.defaultActive=t,this.goodFriends[e]?this.goodFriendsList=this.goodFriends[e]:this.$store.dispatch("createdGoode/fetchGoodFriends",{good_type:3,category_id:e}).then(function(e){o.goodFriendsList=e})}}},w={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"goodFriend"}},[o("div",{staticClass:"goodFriend_header"},[o("el-button",{attrs:{type:"primary",plain:""},on:{click:e.$_showgoodFriend}},[e._v("选择耗材")])],1),e._v(" "),e.good_friends.length?o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.good_friends}},[o("el-table-column",{attrs:{label:"耗材",width:"284"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("productCard",{attrs:{goodName:e.row.good_name,price:e.row.price_low}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-checkbox-group",{attrs:{size:"small"},model:{value:t.row.group_sku_id,callback:function(o){e.$set(t.row,"group_sku_id",o)},expression:"scope.row.group_sku_id"}},e._l(t.row.sku_id,function(e){return o("el-checkbox",{key:""+e.sku_str+t.row.good_id,attrs:{label:e.sku_str,border:""}})}))]}}])})],1):e._e(),e._v(" "),o("el-dialog",{attrs:{title:"选择耗材",visible:e.goodFriend_show,size:"large"},on:{"update:visible":function(t){e.goodFriend_show=t}}},[o("div",[o("span",[e._v("已选：")]),e._v(" "),e._l(e.good_friendsDialog,function(t,r){return o("productCard",{key:t.good_name+"good_friendsDialog",attrs:{closeble:!0,goodName:t.good_name,price:t.price_low},on:{deleteTag:function(t){e.$_deleteTag(r)}}})}),e._v(" "),e.good_friendsDialog.length?e._e():o("span",[e._v("还没有选择任何耗材")])],2),e._v(" "),o("el-row",[o("el-col",{attrs:{span:3}},e._l(e.CATEGORYOPTIONS,function(t){return o("el-menu",{key:t.category_name+"category_name",staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.defaultActive},on:{select:function(o){e.computedRightData(t.category_id,t.category_name)}}},[o("el-menu-item",{attrs:{index:t.category_name}},[o("span",{attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(t.category_name)+" ")])])],1)})),e._v(" "),o("el-col",{attrs:{span:21}},e._l(e.goodFriendsList,function(t){return o("productCard",{key:t.good_name+"goodFriendsList",class:{productCard__disable:e.isDisable(t.good_id)},attrs:{goodName:t.good_name,price:t.price_low},on:{click:function(o){e.$_addGoodFriend(t)}}})}))],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.goodFriend_show=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.$_confirmAdd}},[e._v("确 定")])],1)],1),e._v(" "),o("div",{staticClass:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.$_changeTabPre}},[e._v("上一步")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.$_changeTabNext}},[e._v("下一步")])],1)],1)},staticRenderFns:[]};var x=o("VU/8")(k,w,!1,function(e){o("sGbL")},null,null).exports,C={name:"tabletest",components:{BreadCrumb:s.a,FormlistItem:v,FormlistProduct:I,FormlistGoodFriend:x},data:function(){return{breadcrumb:i.b,editName:"BasicInfo"}},computed:a()({},Object(n.c)("createdGoode",["formInfo"]),{good_type:function(){return this.$route.query.good_type},good_id:function(){return this.$route.query.good_id},isGoodFriend:function(){return"1"===this.$route.query.good_type},isCoupon:function(){return"4"===this.$route.query.good_type}}),created:function(){var e=this.$route.query.good_id;this.$store.commit("createdGoode/initFormInfo"),this.$store.commit("createdGoode/setFormInfo",{good_type:this.good_type,good_id:this.good_id}),+e&&this.$store.dispatch("createdGoode/fetchFormInfo",{id:e})},methods:{$_changeTab_next:function(e,t){switch(this.editName){case"BasicInfo":this.editName=this.isGoodFriend?"addGoodFriend":"ProductDetails";break;case"addGoodFriend":this.editName="ProductDetails"}},$_changeTab_pre:function(e,t){switch(this.editName){case"ProductDetails":this.editName=this.isGoodFriend?"addGoodFriend":"BasicInfo";break;case"addGoodFriend":this.editName="BasicInfo"}}}},S={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"page",attrs:{id:"createGood"}},[o("div",{staticClass:"page-header"},[o("div",{staticClass:"crumbs"},[o("bread-crumb",{attrs:{"bread-crumb":e.breadcrumb}})],1)]),e._v(" "),o("div",{staticClass:"page-content"},[[o("el-tabs",{model:{value:e.editName,callback:function(t){e.editName=t},expression:"editName"}},[o("el-tab-pane",{staticClass:"panel",attrs:{label:"编辑基本信息",name:"BasicInfo",disabled:""}},[o("FormlistItem",{on:{changeTabNext:e.$_changeTab_next,changeTabPre:e.$_changeTab_pre}})],1),e._v(" "),e.isGoodFriend?o("el-tab-pane",{staticClass:"panel",attrs:{label:"添加耗材",name:"addGoodFriend",disabled:""}},[o("FormlistGoodFriend",{on:{changeTabNext:e.$_changeTab_next,changeTabPre:e.$_changeTab_pre}})],1):e._e(),e._v(" "),e.isCoupon?e._e():o("el-tab-pane",{staticClass:"panel",attrs:{label:"编辑商品详情",name:"ProductDetails",disabled:""}},[o("FormlistProduct",{on:{changeTabNext:e.$_changeTab_next,changeTabPre:e.$_changeTab_pre}})],1)],1)]],2)])},staticRenderFns:[]};var T=o("VU/8")(C,S,!1,function(e){o("iboo")},null,null);t.default=T.exports},UyYF:function(e,t,o){"use strict";o.d(t,"b",function(){return r}),o.d(t,"a",function(){return a});var r=[{name:"商品管理"},{name:"平台商品",url:"/goodList"},{name:"添加商品"}],a=[{category_id:1,category_name:"美容"},{category_id:2,category_name:"美甲美睫"},{category_id:3,category_name:"美发"},{category_id:4,category_name:"美体"},{category_id:5,category_name:"轻医美"}]},chPc:function(e,t,o){e.exports=o.p+"static/img/2.50e4091.png"},iboo:function(e,t){},jjd0:function(e,t){},kpHl:function(e,t){},sBwj:function(e,t){},sGbL:function(e,t){},tXAg:function(e,t){}});